import{_ as Je,s as Ze,Z as Qe,e as h,B as U,$ as be,f as Xe,r as I,G as xe,o as s,c as _,H as ea,m as $,w as r,h as D,a as S,t as m,b as n,F as A,k as N,j as V,i as b,K as aa,y as la,D as G,E as B}from"./index-8e378a69.js";const ta={class:"product-edit-container"},na={class:"attribute-option"},ra=["innerHTML"],ua={class:"attribute-name"},oa=["innerHTML"],da={class:"attribute-input-container"},ia={key:0,class:"gradient-control"},sa=["value","onInput"],ca={class:"percent-display"},pa={key:0,class:"no-attributes-message"},ma={class:"attribute-header"},va={class:"attribute-title"},_a={key:3,class:"amount-entry mb-3"},ga={key:7,class:"image-preview-list",style:{"margin-bottom":"1em"}},fa=["src"],ba=["src"],ya={key:8,class:"image-preview-list",style:{"margin-bottom":"1em"}},$a=["src"],ha={class:"el-upload__text"},C="https://backend.msgperfumes.com",Va={__name:"Edit",setup(Pa){const ye=Ze(),$e=Qe(),re=h(null),ue=$e.params.id,O=h(!1),l=h({name_en:"",name_ar:"",price:"",is_available:1,description_en:"",description_ar:"",category_ar:"",category_en:"",category_id:null,currency_id:null,country_id:null,parent_id:null,brand_id:null,images:[],amount_required:!1,amounts:[],unit_id:null,weight:null,amount_price:null,discount:{id:null,value:null,startDate:null,endDate:null,is_active:!1},attributes:[],main_ingredients:[],fragrance_notes:[],attribute_ids:[],attribute_values:{},selected_main_ingredient_ids:[]}),he=h(null),Ve=h(null),Pe=h(null),ke=h(null),De=h(null),Ae=()=>{l.value.amounts.push({unit_id:null,weight:null,price:null})},we=e=>{G.confirm(localStorage.getItem("lang")==="ar"?"سيتم حذف الكمية":"The amount will be deleted","Warning",{confirmButtonText:localStorage.getItem("lang")==="ar"?"موافق":"OK",cancelButtonText:localStorage.getItem("lang")==="ar"?"إلغاء":"Cancel",type:"warning"}).then(()=>{const a=l.value.amounts[e];a&&a.id&&X.value.push(a.id),l.value.amounts.splice(e,1),B.success(localStorage.getItem("lang")==="ar"?"تم حذف الكمية بنجاح":"Amount deleted successfully")}).catch(()=>{B.info(localStorage.getItem("lang")==="ar"?"تم إلغاء الحذف":"Delete cancelled")})},Ie={name_en:[{required:!0,message:"Required",trigger:"blur"}],price:[{required:!0,message:"Required",trigger:"blur"}]},T=h([]),K=h([]),z=h([]),H=h([]),F=h([]),j=h([]),J=h([]),oe=h([]),Z=h(null),Q=h(null),X=h([]),de=h(!1),x=h(null),R=h(!1),ie=h(!1),Se=e=>(localStorage.getItem("lang")||"en")==="ar"?e.name_ar:e.name_en,ee=U(()=>K.value.filter(e=>!e.is_deleted)),Ne=U(()=>{const e=localStorage.getItem("lang")||"en";let a=F.value.find(i=>i.id===l.value.brand_id);return!a&&l.value.parent&&l.value.parent.brand&&(a=l.value.parent.brand),a?e==="ar"?a.name_ar||a.name_en:a.name_en||a.name_ar:"N/A"}),Ue=U(()=>{const e=localStorage.getItem("lang")||"en";let a=T.value.find(i=>i.id===l.value.category_id);return!a&&l.value.parent&&l.value.parent.category&&(a=l.value.parent.category),a?e==="ar"?a.name_ar||a.name_en:a.name_en||a.name_ar:"N/A"}),Ce=U(()=>{const e=localStorage.getItem("lang")||"en";let a=ee.value.find(i=>i.id===l.value.currency_id);return!a&&l.value.parent&&l.value.parent.currency&&(a=l.value.parent.currency),a?e==="ar"?a.name_ar||a.name_en:a.name_en||a.name_ar:"N/A"}),Ee=U(()=>{const e=localStorage.getItem("lang")||"en";let a=z.value.find(i=>i.id===l.value.country_id);return!a&&l.value.parent&&l.value.parent.country_id&&(a=z.value.find(i=>i.id===l.value.parent.country_id)),a?e==="ar"?a.name_ar||a.name_en:a.name_en||a.name_ar:"N/A"}),Me=U(()=>{const e=l.value.parent;return e?(localStorage.getItem("lang")||"en")==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar:"None"}),W=U(()=>{let e=F.value.find(a=>a.id===l.value.brand_id);return!e&&l.value.parent&&l.value.parent.brand&&(e=l.value.parent.brand),e&&e.images&&e.images.length>0?L(e.images[0].path):null}),se=U(()=>{const e=localStorage.getItem("lang")||"en",a=F.value.find(i=>i.id===l.value.brand_id);return a?e==="ar"?a.name_ar||a.name_en:a.name_en||a.name_ar:"N/A"}),ce=U(()=>{const e=localStorage.getItem("lang")||"en",a=T.value.find(i=>i.id===l.value.category_id);return a?e==="ar"?a.name_ar||a.name_en:a.name_en||a.name_ar:"N/A"}),pe=U(()=>{const e=localStorage.getItem("lang")||"en",a=ee.value.find(i=>i.id===l.value.currency_id);return a?e==="ar"?a.name_ar||a.name_en:a.name_en||a.name_ar:"N/A"}),me=U(()=>{const e=localStorage.getItem("lang")||"en",a=z.value.find(i=>i.id===l.value.country_id);return a?e==="ar"?a.name_ar||a.name_en:a.name_en||a.name_ar:"N/A"}),ve=U(()=>{const e=H.value.find(i=>i.id===l.value.parent_id);return e?(localStorage.getItem("lang")||"en")==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar:"None"}),ae=U(()=>{const e=F.value.find(a=>a.id===l.value.brand_id);return e&&e.images&&e.images.length>0?L(e.images[0].path):null}),L=e=>e?typeof e=="object"&&e.url?e.url:e.startsWith("http")?e:`${C}/public/storage/${e}`:"",le=e=>{const a=localStorage.getItem("lang")||"en";return e?a==="ar"?e.name_ar||e.name_en||"":e.name_en||e.name_ar||"":""},_e=e=>{const a=localStorage.getItem("lang")||"en";return e?a==="ar"?e.name_ar||e.name_en||"":e.name_en||e.name_ar||"":""},ge=e=>typeof e=="string"&&e.includes("%"),fe=e=>!e||!ge(e)?0:parseFloat(e.replace("%",""))||0,Be=(e,a)=>{l.value.attribute_values[e]=`${a}%`},Te=(e,a)=>{l.value.attribute_values[e]=a},te=e=>J.value.find(a=>a.id===e),Oe=(e,a)=>{if(!e)return"";let i=e;const o=i.match(/<defs[^>]*>([\s\S]*?)<\/defs>/);let u=o?o[1]:"";const p=typeof a=="string"&&a.includes("%"),k=p?parseFloat(a.replace("%","")):null;if(p&&k!==null&&!isNaN(k)){const w=Math.max(0,Math.min(1,k/100)),P=u.match(/<linearGradient id="(g[0-9]+)"[^>]*>([\s\S]*?)<\/linearGradient>/);if(P){const d=P[1];let y=P[2];y=y.replace(/<stop offset="[^"]*"([^>]*)>/g,()=>`<stop offset="${w}" stop-color="#78D6F0"/><stop offset="${w}" stop-color="#8D8D8D" stop-opacity="0.2"/>`);const Y=`<linearGradient id="${d}"${P[0].split(d)[1].split(">")[0]}>${y}</linearGradient>`;u=u.replace(P[0],Y),i.includes('fill="')&&!i.includes(`fill="url(#${d})"`)&&(i=i.replace(/fill="[^"]*"/g,`fill="url(#${d})"`)),i.includes('stroke="')&&!i.includes(`stroke="url(#${d})"`)&&(i=i.replace(/stroke="[^"]*"/g,`stroke="url(#${d})" stroke-width="2"`))}else{const d=`gradient-${Math.random().toString(36).substr(2,9)}`,y=`
      <linearGradient id="${d}" x1="0%" y1="100%" x2="0%" y2="0%" gradientUnits="userSpaceOnUse">
        <stop offset="${w}" stop-color="#78D6F0"/>
        <stop offset="${w}" stop-color="#8D8D8D" stop-opacity="0.2"/>
      </linearGradient>
    `;u+=y,i.includes('fill="')&&(i=i.replace(/fill="[^"]*"/g,`fill="url(#${d})"`)),i.includes('stroke="')&&(i=i.replace(/stroke="[^"]*"/g,`stroke="url(#${d})" stroke-width="2"`))}if(o)i=i.replace(o[0],`<defs>${u}</defs>`);else{const d=i.match(/<svg[^>]*>/);d&&(i=i.replace(d[0],`${d[0]}<defs>${u}</defs>`))}}const f=i.lastIndexOf("</svg>");return f!==-1&&a?i.substring(0,f)+`<text x="50%" y="50%" font-size="16" font-weight="bold" text-anchor="middle" dominant-baseline="middle" fill="#333333" stroke="white" stroke-width="1">${a}</text>`+i.substring(f):i},Fe=async()=>{var a,i;const e=(a=JSON.parse(localStorage.getItem("tokenData")))==null?void 0:a.token;D.defaults.headers.common.Authorization=`Bearer ${e}`,O.value=!0;try{const[o,u,p,k,f,w,P,d]=await Promise.all([l.value.brand_id?D.get(`${C}/api/brands/${l.value.brand_id}/categories`):D.get(`${C}/api/categories`),D.get(`${C}/api/website/currencies`),D.get(`${C}/api/countries`),D.get(`${C}/api/products`),D.get(`${C}/api/brands`),D.get(`${C}/api/units`),D.get(`${C}/api/attributes`),D.get(`${C}/api/main-ingredients`)]);T.value=o.data.data,console.log("Categories:",T.value),K.value=u.data.data,z.value=p.data.data,H.value=k.data.data,F.value=f.data.data.map(y=>({...y,logo_path:y.images&&y.images.length>0?y.images[0].path:null})),j.value=w.data.data,J.value=P.data.data||[],oe.value=Array.isArray(d.data)?d.data:((i=d.data)==null?void 0:i.data)||[]}catch(o){console.error("Error fetching options",o)}finally{O.value=!1}},Re=async()=>{var e,a,i,o,u,p,k,f,w;O.value=!0;try{const d=(await D.get(`/api/products/${ue}`)).data.data;console.log(d),l.value.name_ar=d.name_ar,l.value.name_en=d.name_en,l.value.description_ar=d.description_ar,l.value.description_en=d.description_en,l.value.price=d.price,l.value.category_ar=(e=d.category)==null?void 0:e.name_ar,l.value.category_en=(a=d.category)==null?void 0:a.name_en,l.value.currency_id=d.currency_id,l.value.country_id=d.country_id,l.value.brand_id=d.brand_id,l.value.parent_id=d.parent_id,Pe.value=d.currency_id,ke.value=d.country_id,he.value=d.brand_id,De.value=d.parent_id,l.value.quantity=d.quantity??1,l.value.amounts=((i=d.amounts)==null?void 0:i.map(c=>({unit_id:c.unit_id,weight:c.weight,price:c.price,id:c.id})))||[],l.value.amounts.length>0&&(l.value.price=((o=l.value.amounts[0])==null?void 0:o.price)??l.value.price),l.value.type=d.type??"product",l.value.offer=d.discount?"1":"0",l.value.offer_price=d.discount?d.discounted_price:"",l.value.category_id=d.category_id,Ve.value=d.category_id,l.value.images=d.images.map(c=>({id:c.id,path:c.path,url:L(c.path)})),l.value.discount=d.discount?{id:d.discount.id,value:parseFloat(d.discount.discount_value),startDate:(u=d.discount.start_date)==null?void 0:u.split("T")[0],endDate:(p=d.discount.end_date)==null?void 0:p.split("T")[0],is_active:d.discount.is_active}:{id:null,value:null,startDate:null,endDate:null,is_active:!1},R.value=!!d.discount,l.value.attributes=((k=d.attributes)==null?void 0:k.map(c=>({name_en:c.name_en,name_ar:c.name_ar,value:c.value,id:c.id})))||[],l.value.main_ingredients=((f=d.main_ingredients)==null?void 0:f.map(c=>({name_en:c.name_en,name_ar:c.name_ar,id:c.id,images:c.images.map(E=>({id:E.id,path:E.path,url:L(E.path)}))||[]})))||[],l.value.fragrance_notes=((w=d.fragrance_notes)==null?void 0:w.map(c=>({name_en:c.name_en,name_ar:c.name_ar,description_en:c.description_en,description_ar:c.description_ar,id:c.id})))||[];let y=[];if(Array.isArray(d.attributes)&&(y=y.concat(d.attributes)),d.parent&&Array.isArray(d.parent.attributes_with_values)){const c=new Set(y.map(q=>q.id)),E=d.parent.attributes_with_values.filter(q=>!c.has(q.id));y=y.concat(E)}if(Array.isArray(y)&&y.length>0){l.value.attribute_ids=y.map(E=>E.id);const c={};y.forEach(E=>{c[E.id]=E.value}),l.value.attribute_values=c}else l.value.attribute_ids=[],l.value.attribute_values={};l.value.selected_main_ingredient_ids=(d.main_ingredients||[]).filter(c=>c&&c.id).map(c=>c.id),Z.value=d.converted_price??null,Q.value=d.discounted_price??null;const[Y,M,ne]=await Promise.all([D.get("/api/categories"),D.get("/api/website/currencies"),D.get("/api/brands")]);T.value=Y.data.data,K.value=M.data.data,F.value=ne.data.data.map(c=>({...c,logo_path:c.images&&c.images.length>0?c.images[0].path:null}))}catch(P){console.error("Error loading product data",P)}finally{O.value=!1}},Ye=(e,a)=>l.value.images=a,ze=(e,a)=>l.value.images=a,Le=()=>{re.value.validate(async e=>{var i;if(!e)return;const a=new FormData;Array.isArray(l.value.amounts)&&l.value.amounts.length>0;for(const o in l.value){if(o==="images"||o==="amounts"||o==="attributes"||o==="main_ingredients"||o==="fragrance_notes"||o==="discount"||o==="attribute_ids"||o==="attribute_values"||o==="selected_main_ingredient_ids")continue;const u=l.value[o];if(!(u==null||u===""))if(o==="price"){const p=typeof u=="number"?u:Number(u);if(Number.isNaN(p))continue;a.append("price",p)}else a.append(o,u)}Array.isArray(l.value.attribute_ids)&&l.value.attribute_ids.forEach((o,u)=>{var k;a.append(`attribute_ids[${u}]`,o);const p=(k=l.value.attribute_values)==null?void 0:k[o];if(p!=null&&p!==""){let f=p;typeof f=="string"&&f.includes("%")&&(f=parseFloat(f.replace("%",""))),a.append(`attribute_values[${o}]`,f)}}),Array.isArray(l.value.selected_main_ingredient_ids)&&l.value.selected_main_ingredient_ids.length>0&&l.value.selected_main_ingredient_ids.forEach((o,u)=>{a.append(`selected_main_ingredient_ids[${u}]`,o)}),l.value.amounts.forEach((o,u)=>{a.append(`amounts[${u}][unit_id]`,o.unit_id),a.append(`amounts[${u}][weight]`,o.weight),a.append(`amounts[${u}][price]`,o.price),o.id&&a.append(`amounts[${u}][id]`,o.id)}),l.value.images.forEach(o=>{o.raw?a.append("images[]",o.raw):o.id&&a.append("existing_images[]",o.id)}),R.value&&l.value.discount&&l.value.discount.value?(a.append("discount[value]",l.value.discount.value),a.append("discount[startDate]",l.value.discount.startDate),a.append("discount[endDate]",l.value.discount.endDate),l.value.discount.id&&a.append("discount[id]",l.value.discount.id),a.append("delete_discount","0")):de.value&&(a.append("delete_discount","1"),a.append("discount[deleted]","1"),x.value&&a.append("discount[id]",x.value)),X.value.length>0&&X.value.forEach((o,u)=>{a.append(`remove_amount_ids[${u}]`,o)}),ie.value&&l.value.attributes.forEach((o,u)=>{a.append(`attributes[${u}][name_en]`,o.name_en),a.append(`attributes[${u}][name_ar]`,o.name_ar),a.append(`attributes[${u}][value]`,o.value),o.id&&a.append(`attributes[${u}][id]`,o.id)}),l.value.main_ingredients.forEach((o,u)=>{a.append(`main_ingredients[${u}][name_en]`,o.name_en),a.append(`main_ingredients[${u}][name_ar]`,o.name_ar),o.id&&a.append(`main_ingredients[${u}][id]`,o.id),o.images.forEach(p=>{p.raw?a.append(`main_ingredients[${u}][images][]`,p.raw):p.id&&a.append(`main_ingredients[${u}][existing_images][]`,p.id)})}),l.value.fragrance_notes.forEach((o,u)=>{a.append(`fragrance_notes[${u}][name_en]`,o.name_en),a.append(`fragrance_notes[${u}][name_ar]`,o.name_ar),a.append(`fragrance_notes[${u}][description_en]`,o.description_en),a.append(`fragrance_notes[${u}][description_ar]`,o.description_ar),o.id&&a.append(`fragrance_notes[${u}][id]`,o.id)}),O.value=!0;try{const o=(i=JSON.parse(localStorage.getItem("tokenData")))==null?void 0:i.token;D.defaults.headers.common.Authorization=`Bearer ${o}`,a.append("_method","PUT"),await D.post(`${C}/api/products/${ue}`,a,{headers:{"Content-Type":"multipart/form-data"}}),await G.alert(localStorage.getItem("lang")==="ar"?"تم تحديث المنتج بنجاح":"Product updated successfully",localStorage.getItem("lang")==="ar"?"نجاح":"Success",{type:"success",confirmButtonText:localStorage.getItem("lang")==="ar"?"حسناً":"OK"}),ye.push("/products")}catch(o){console.error("Error submitting form",o),B.error("Error updating product")}finally{O.value=!1}})},qe=()=>{G.confirm(localStorage.getItem("lang")==="ar"?"سيتم حذف الخصم":"The discount will be deleted","Warning",{confirmButtonText:localStorage.getItem("lang")==="ar"?"موافق":"OK",cancelButtonText:localStorage.getItem("lang")==="ar"?"إلغاء":"Cancel",type:"warning"}).then(()=>{var e;de.value=!0,x.value=((e=l.value.discount)==null?void 0:e.id)||null,R.value=!1,l.value.discount.value=null,l.value.discount.startDate=null,l.value.discount.endDate=null,l.value.discount.is_active=!1,B.success(localStorage.getItem("lang")==="ar"?"تم حذف الخصم بنجاح":"Discount deleted successfully")}).catch(()=>{B.info(localStorage.getItem("lang")==="ar"?"تم إلغاء الحذف":"Delete cancelled")})},Ge=()=>{l.value.attributes.push({name_en:"",name_ar:"",value:""})},We=e=>{if(l.value.attributes.length<=1){B.warning(localStorage.getItem("lang")==="ar"?"يجب عليك حفظ خاصية واحدة على الاقل":"At least one attribute is required.");return}G.confirm(localStorage.getItem("lang")==="ar"?"سيتم حذف الخاصية":"The attribute will be deleted","Warning",{confirmButtonText:localStorage.getItem("lang")==="ar"?"موافق":"OK",cancelButtonText:localStorage.getItem("lang")==="ar"?"إلغاء":"Cancel",type:"warning"}).then(()=>{l.value.attributes.splice(e,1),B.success(localStorage.getItem("lang")==="ar"?"تم حذف الخاصية بنجاح":"Attribute deleted successfully")}).catch(()=>{B.info(localStorage.getItem("lang")==="ar"?"تم إلغاء الحذف":"Delete cancelled")})},Ke=()=>{l.value.main_ingredients.push({name_en:"",name_ar:""})},He=()=>{l.value.fragrance_notes.push({name_en:"",name_ar:"",description_en:"",description_ar:""})},je=e=>{G.confirm(localStorage.getItem("lang")==="ar"?"سيتم حذف الملاحظة العطرية":"The fragrance note will be deleted","Warning",{confirmButtonText:localStorage.getItem("lang")==="ar"?"موافق":"OK",cancelButtonText:localStorage.getItem("lang")==="ar"?"إلغاء":"Cancel",type:"warning"}).then(()=>{l.value.fragrance_notes.splice(e,1),B.success(localStorage.getItem("lang")==="ar"?"تم حذف الملاحظة العطرية بنجاح":"Fragrance note deleted successfully")}).catch(()=>{B.info(localStorage.getItem("lang")==="ar"?"تم إلغاء الحذف":"Delete cancelled")})};return be(()=>l.value.brand_id,async e=>{if(e)try{const a=await D.get(`${C}/api/brands/${e}/categories`);T.value=a.data.data,console.log("Categories for brand:",T.value)}catch(a){console.error("Failed to fetch categories for brand",a)}else{const a=await D.get(`${C}/api/categories`);T.value=a.data.data,l.value.category_id=null}}),Xe(async()=>{await Re(),Fe()}),be(()=>l.value.amounts,e=>{var a;Array.isArray(e)&&e.length>0&&(l.value.price=((a=e[0])==null?void 0:a.price)??null)},{deep:!0}),(e,a)=>{const i=I("el-option"),o=I("el-select"),u=I("el-form-item"),p=I("el-input"),k=I("el-divider"),f=I("el-col"),w=I("el-row"),P=I("el-button"),d=I("el-switch"),y=I("el-input-number"),Y=I("el-date-picker"),M=I("el-tag"),ne=I("el-upload"),c=I("el-form"),E=I("el-card"),q=xe("loading");return s(),_("div",ta,[ea((s(),$(E,{class:"product-card"},{default:r(()=>[S("h2",null,m(e.$t("Products.EditProduct")),1),n(c,{model:l.value,ref_key:"formRef",ref:re,rules:Ie,"label-width":"120px",enctype:"multipart/form-data"},{default:r(()=>[n(u,{label:e.$t("Products.SelectExistingMainIngredients")},{default:r(()=>[n(o,{modelValue:l.value.selected_main_ingredient_ids,"onUpdate:modelValue":a[0]||(a[0]=t=>l.value.selected_main_ingredient_ids=t),placeholder:e.$t("Products.SelectExistingMainIngredients"),filterable:"",clearable:"",multiple:""},{default:r(()=>[(s(!0),_(A,null,N(oe.value,t=>(s(),$(i,{key:t.id,label:_e(t),value:t.id},{default:r(()=>[V(m(_e(t)),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:e.$t("Products.Attributes"),prop:"attribute_ids"},{default:r(()=>[n(o,{modelValue:l.value.attribute_ids,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.attribute_ids=t),placeholder:e.$t("Products.SelectAttributes"),filterable:"",clearable:"",multiple:"","popper-class":"attribute-dropdown"},{default:r(()=>[(s(!0),_(A,null,N(J.value,t=>(s(),$(i,{key:t.id,label:le(t),value:t.id},{default:r(()=>[S("div",na,[t.icon?(s(),_("div",{key:0,class:"attribute-icon",innerHTML:t.icon},null,8,ra)):b("",!0),S("span",null,m(le(t)),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:e.$t("Products.AttributeValues")},{default:r(()=>[(s(!0),_(A,null,N(l.value.attribute_ids,t=>{var g;return s(),_("div",{key:t,class:"attribute-value-item"},[S("div",ua,[(g=te(t))!=null&&g.icon?(s(),_("div",{key:0,class:"attribute-icon",innerHTML:Oe(te(t).icon,l.value.attribute_values[t])},null,8,oa)):b("",!0),S("span",null,m(le(te(t))||t),1)]),S("div",da,[n(p,{modelValue:l.value.attribute_values[t],"onUpdate:modelValue":v=>l.value.attribute_values[t]=v,placeholder:e.$t("Products.AttributeValues"),onInput:v=>Te(t,v)},null,8,["modelValue","onUpdate:modelValue","placeholder","onInput"]),ge(l.value.attribute_values[t])?(s(),_("div",ia,[a[21]||(a[21]=S("label",{class:"gradient-label"},"Gradient %:",-1)),S("input",{type:"range",value:fe(l.value.attribute_values[t]),min:"0",max:"100",onInput:v=>Be(t,v.target.value),class:"gradient-range"},null,40,sa),S("span",ca,m(fe(l.value.attribute_values[t]))+"%",1)])):b("",!0)])])}),128)),(l.value.attribute_ids||[]).length===0?(s(),_("div",pa,m(e.$t("Products.PleaseSelectAttributesFirst")),1)):b("",!0)]),_:1},8,["label"]),n(u,{label:e.$t("Products.NameEn"),prop:"name_en"},{default:r(()=>[n(p,{modelValue:l.value.name_en,"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.name_en=t),placeholder:e.$t("Products.NameEn")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:e.$t("Products.NameAr"),prop:"name_ar"},{default:r(()=>[n(p,{modelValue:l.value.name_ar,"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.name_ar=t),placeholder:e.$t("Products.NameAr")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l.value.amounts?(s(!0),_(A,{key:0},N(l.value.amounts,(t,g)=>(s(),_("div",{key:g,class:"amount-entry mb-3"},[n(k,{"content-position":"left"},{default:r(()=>[V(m(e.$t("Products.Amount-Info")),1)]),_:1}),n(w,{gutter:20},{default:r(()=>[n(f,{span:12},{default:r(()=>[n(u,{label:e.$t("Products.Unit"),prop:`amounts.${g}.unit_id`},{default:r(()=>[n(o,{modelValue:t.unit_id,"onUpdate:modelValue":v=>t.unit_id=v,placeholder:e.$t("Products.select-unit"),filterable:"",clearable:""},{default:r(()=>[(s(!0),_(A,null,N(j.value,v=>(s(),$(i,{key:v.id,label:v.name_en,value:v.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"])]),_:2},1024),n(f,{span:12},{default:r(()=>[n(u,{label:e.$t("Products.Weight"),prop:`amounts.${g}.weight`},{default:r(()=>[n(p,{modelValue:t.weight,"onUpdate:modelValue":v=>t.weight=v,type:"number",min:1,placeholder:e.$t("Products.Weight")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"])]),_:2},1024),n(f,{span:12},{default:r(()=>[n(u,{label:e.$t("Products.amount-Price"),prop:`amounts.${g}.price`},{default:r(()=>[n(p,{modelValue:t.price,"onUpdate:modelValue":v=>t.price=v,type:"number",min:1,placeholder:e.$t("Products.amount-Price")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"])]),_:2},1024)]),_:2},1024),n(w,{gutter:20,class:"button-row"},{default:r(()=>[n(f,{span:24},{default:r(()=>[l.value.amounts.length>0?(s(),$(P,{key:0,type:"danger",onClick:v=>we(g),icon:"el-icon-delete"},{default:r(()=>[V(m(e.$t("Products.RemoveAmount")),1)]),_:1},8,["onClick"])):b("",!0),l.value.amounts.length>0?(s(),$(P,{key:1,type:"success",plain:"",onClick:Ae,icon:"el-icon-plus"},{default:r(()=>[V(m(e.$t("Products.AddAmount")),1)]),_:1})):b("",!0)]),_:2},1024)]),_:2},1024)]))),128)):b("",!0),ie.value?(s(),_(A,{key:1},[n(k,{"content-position":"left"},{default:r(()=>[V(m(e.$t("Products.Attributes")),1)]),_:1}),(s(!0),_(A,null,N(l.value.attributes,(t,g)=>(s(),_("div",{key:g,class:"attribute-entry"},[S("div",ma,[S("span",va,m(e.$t("Products.Attributes"))+" #"+m(g+1),1),n(P,{class:"attribute-remove",type:"danger",text:"",circle:"",icon:aa(la),onClick:v=>We(g)},null,8,["icon","onClick"])]),n(w,{gutter:16,class:"attribute-fields"},{default:r(()=>[n(f,{span:8},{default:r(()=>[n(u,{label:e.$t("Products.NameEn"),prop:`attributes.${g}.name_en`},{default:r(()=>[n(p,{modelValue:t.name_en,"onUpdate:modelValue":v=>t.name_en=v,placeholder:e.$t("Products.NameEn")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"])]),_:2},1024),n(f,{span:8},{default:r(()=>[n(u,{label:e.$t("Products.NameAr"),prop:`attributes.${g}.name_ar`},{default:r(()=>[n(p,{modelValue:t.name_ar,"onUpdate:modelValue":v=>t.name_ar=v,placeholder:e.$t("Products.NameAr")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"])]),_:2},1024),n(f,{span:8},{default:r(()=>[n(u,{label:e.$t("Products.Value"),prop:`attributes.${g}.value`},{default:r(()=>[n(p,{modelValue:t.value,"onUpdate:modelValue":v=>t.value=v,placeholder:e.$t("Products.Value")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"])]),_:2},1024)]),_:2},1024)]))),128)),n(P,{type:"primary",plain:"",onClick:Ge},{default:r(()=>[V(m(e.$t("Products.AddAttribute")),1)]),_:1})],64)):b("",!0),n(P,{type:"primary",onClick:Ke},{default:r(()=>[V(m(e.$t("Products.AddMainIngredient")),1)]),_:1}),n(k,{"content-position":"left"},{default:r(()=>[V(m(e.$t("Products.FragranceNotes")),1)]),_:1}),(s(!0),_(A,null,N(l.value.fragrance_notes,(t,g)=>(s(),_("div",{key:g,class:"fragrance-note-entry mb-3"},[n(w,{gutter:20},{default:r(()=>[n(f,{span:12},{default:r(()=>[n(u,{label:`Note Name EN ${g+1}`,prop:`fragrance_notes.${g}.name_en`},{default:r(()=>[n(p,{modelValue:t.name_en,"onUpdate:modelValue":v=>t.name_en=v,placeholder:e.$t("Products.NameEn")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"])]),_:2},1024),n(f,{span:12},{default:r(()=>[n(u,{label:`Note Name AR ${g+1}`,prop:`fragrance_notes.${g}.name_ar`},{default:r(()=>[n(p,{modelValue:t.name_ar,"onUpdate:modelValue":v=>t.name_ar=v,placeholder:e.$t("Products.NameAr")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"])]),_:2},1024)]),_:2},1024),n(w,{gutter:20},{default:r(()=>[n(f,{span:12},{default:r(()=>[n(u,{label:`Note Description EN ${g+1}`,prop:`fragrance_notes.${g}.description_en`},{default:r(()=>[n(p,{type:"textarea",modelValue:t.description_en,"onUpdate:modelValue":v=>t.description_en=v,placeholder:e.$t("Products.DescriptionEn")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"])]),_:2},1024),n(f,{span:12},{default:r(()=>[n(u,{label:`Note Description AR ${g+1}`,prop:`fragrance_notes.${g}.description_ar`},{default:r(()=>[n(p,{type:"textarea",modelValue:t.description_ar,"onUpdate:modelValue":v=>t.description_ar=v,placeholder:e.$t("Products.DescriptionAr")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"])]),_:2},1024)]),_:2},1024),n(w,{gutter:20,class:"button-row"},{default:r(()=>[n(f,{span:24},{default:r(()=>[n(P,{type:"danger",onClick:v=>je(g)},{default:r(()=>[V(m(e.$t("Products.RemoveFragranceNote")),1)]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),n(P,{type:"primary",onClick:He},{default:r(()=>[V(m(e.$t("Products.AddFragranceNote")),1)]),_:1}),R.value?(s(),$(u,{key:2,label:e.$t("Products.discount"),prop:"discount.value"},{default:r(()=>[n(d,{modelValue:l.value.discount.is_active,"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.discount.is_active=t),"active-text":"Yes","inactive-text":"No"},null,8,["modelValue"])]),_:1},8,["label"])):b("",!0),R.value?(s(),_("div",_a,[n(k,{"content-position":"left"},{default:r(()=>[V(m(e.$t("Products.discountInfo")),1)]),_:1}),R.value?(s(),_(A,{key:0},[n(u,{label:e.$t("Products.Discount-Value"),prop:"discount.value"},{default:r(()=>[n(y,{modelValue:l.value.discount.value,"onUpdate:modelValue":a[5]||(a[5]=t=>l.value.discount.value=t),type:"number",min:1,max:99,placeholder:e.$t("Products.Discount-Value")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:e.$t("Products.Start-Date"),prop:"discount.startDate"},{default:r(()=>[n(Y,{modelValue:l.value.discount.startDate,"onUpdate:modelValue":a[6]||(a[6]=t=>l.value.discount.startDate=t),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",placeholder:e.$t("Products.Start-Date"),style:{width:"100%"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:e.$t("Products.End-Date"),prop:"discount.endDate"},{default:r(()=>[n(Y,{modelValue:l.value.discount.endDate,"onUpdate:modelValue":a[7]||(a[7]=t=>l.value.discount.endDate=t),type:"date",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",placeholder:e.$t("Products.End-Date"),style:{width:"100%"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l.value.discount&&(l.value.discount.value||l.value.discount.id)?(s(),$(P,{key:0,type:"danger",icon:"el-icon-delete",onClick:qe},{default:r(()=>[V(m(e.$t("Products.removeDiscount")),1)]),_:1})):b("",!0),n(k)],64)):b("",!0)])):b("",!0),l.value.amounts.length===0?(s(),$(u,{key:4,label:e.$t("Products.Needs-Amount")},{default:r(()=>[n(d,{modelValue:l.value.amount_required,"onUpdate:modelValue":a[8]||(a[8]=t=>l.value.amount_required=t),"active-text":"Yes","inactive-text":"No",dir:"ltr",class:"mx-3"},null,8,["modelValue"])]),_:1},8,["label"])):b("",!0),l.value.amount_required?(s(),_(A,{key:5},[n(k,{"content-position":"left"},{default:r(()=>[V(m(e.$t("Products.Amount-Info")),1)]),_:1}),n(u,{label:e.$t("Products.Unit"),prop:"unit_id"},{default:r(()=>[n(o,{modelValue:l.value.unit_id,"onUpdate:modelValue":a[9]||(a[9]=t=>l.value.unit_id=t),placeholder:e.$t("Products.select-unit"),filterable:"",clearable:""},{default:r(()=>[(s(!0),_(A,null,N(j.value,t=>(s(),$(i,{key:t.id,label:t.name_en,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:e.$t("Products.Weight"),prop:"weight"},{default:r(()=>[n(y,{modelValue:l.value.weight,"onUpdate:modelValue":a[10]||(a[10]=t=>l.value.weight=t),type:"number",min:1,placeholder:e.$t("Products.select-weight")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:e.$t("Products.amount-Price"),prop:"amount_price"},{default:r(()=>[n(y,{modelValue:l.value.amount_price,"onUpdate:modelValue":a[11]||(a[11]=t=>l.value.amount_price=t),type:"number",min:1,placeholder:e.$t("Products.select-price")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])],64)):b("",!0),!l.value.amounts||l.value.amounts.length===0?(s(),$(u,{key:6,label:e.$t("Products.Price"),prop:"price"},{default:r(()=>[n(p,{modelValue:l.value.price,"onUpdate:modelValue":a[12]||(a[12]=t=>l.value.price=t),type:"number",min:1,placeholder:e.$t("Products.Price")},null,8,["modelValue","placeholder"]),Z.value!==null?(s(),$(M,{key:0,size:"small",effect:"plain",class:"current-value"},{default:r(()=>[V("Converted: "+m(Z.value),1)]),_:1})):b("",!0),Q.value!==null?(s(),$(M,{key:1,size:"small",type:"success",effect:"plain",class:"current-value"},{default:r(()=>[V("Discounted: "+m(Q.value),1)]),_:1})):b("",!0)]),_:1},8,["label"])):b("",!0),n(u,{label:e.$t("Products.Availability"),prop:"is_available"},{default:r(()=>[n(d,{modelValue:l.value.is_available,"onUpdate:modelValue":a[13]||(a[13]=t=>l.value.is_available=t),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1},8,["label"]),n(u,{label:e.$t("Products.DescriptionEn"),prop:"description_en"},{default:r(()=>[n(p,{type:"textarea",modelValue:l.value.description_en,"onUpdate:modelValue":a[14]||(a[14]=t=>l.value.description_en=t),placeholder:e.$t("Products.DescriptionEn")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:e.$t("Products.DescriptionAr"),prop:"description_ar"},{default:r(()=>[n(p,{type:"textarea",modelValue:l.value.description_ar,"onUpdate:modelValue":a[15]||(a[15]=t=>l.value.description_ar=t),placeholder:e.$t("Products.DescriptionAr")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(u,{label:e.$t("Products.brand"),prop:"brand_id"},{default:r(()=>[n(o,{modelValue:l.value.brand_id,"onUpdate:modelValue":a[16]||(a[16]=t=>l.value.brand_id=t),filterable:"",clearable:"",placeholder:e.$t("Products.SelectBrand")},{default:r(()=>[(s(!0),_(A,null,N(F.value,t=>(s(),$(i,{key:t.id,label:t.name_en,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Ne.value!==se.value?(s(),$(M,{key:0,size:"small",effect:"plain",class:"current-value"},{default:r(()=>[V("("+m(e.$t("Products.Original"))+": "+m(se.value)+")",1)]),_:1})):b("",!0)]),_:1},8,["label"]),W.value||ae.value?(s(),_("div",ga,[W.value?(s(),_("img",{key:0,src:W.value,alt:"Brand Image",style:{"max-width":"120px","max-height":"120px","margin-right":"10px","border-radius":"8px"}},null,8,fa)):b("",!0),W.value!==ae.value?(s(),$(M,{key:1,size:"small",effect:"plain",class:"current-value"},{default:r(()=>[V("("+m(e.$t("Products.Original"))+" brand: ",1),S("img",{src:ae.value,alt:"Original Brand Image",style:{"max-width":"40px","max-height":"40px","border-radius":"4px"}},null,8,ba),a[22]||(a[22]=V(")",-1))]),_:1})):b("",!0)])):b("",!0),n(u,{label:e.$t("Products.Category"),prop:"category_id"},{default:r(()=>[n(o,{modelValue:l.value.category_id,"onUpdate:modelValue":a[17]||(a[17]=t=>l.value.category_id=t),filterable:"",clearable:"",placeholder:e.$t("Products.SelectCategory")},{default:r(()=>[(s(!0),_(A,null,N(T.value,t=>(s(),$(i,{key:t.id,label:t.name_en||t.name_ar,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Ue.value!==ce.value?(s(),$(M,{key:0,size:"small",effect:"plain",class:"current-value"},{default:r(()=>[V("("+m(e.$t("Products.Original"))+": "+m(ce.value)+")",1)]),_:1})):b("",!0)]),_:1},8,["label"]),n(u,{label:e.$t("Products.Currency"),prop:"currency_id"},{default:r(()=>[n(o,{modelValue:l.value.currency_id,"onUpdate:modelValue":a[18]||(a[18]=t=>l.value.currency_id=t),filterable:"",clearable:"",placeholder:e.$t("Products.SelectCurrency")},{default:r(()=>[(s(!0),_(A,null,N(ee.value,t=>(s(),$(i,{key:t.id,label:Se(t),value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Ce.value!==pe.value?(s(),$(M,{key:0,size:"small",effect:"plain",class:"current-value"},{default:r(()=>[V("("+m(e.$t("Products.Original"))+": "+m(pe.value)+")",1)]),_:1})):b("",!0)]),_:1},8,["label"]),n(u,{label:e.$t("Products.Country"),prop:"country_id"},{default:r(()=>[n(o,{modelValue:l.value.country_id,"onUpdate:modelValue":a[19]||(a[19]=t=>l.value.country_id=t),filterable:"",clearable:"",placeholder:e.$t("Products.SelectCountry")},{default:r(()=>[(s(!0),_(A,null,N(z.value,t=>(s(),$(i,{key:t.id,label:t.name_en||t.name_ar,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Ee.value!==me.value?(s(),$(M,{key:0,size:"small",effect:"plain",class:"current-value"},{default:r(()=>[V("("+m(e.$t("Products.Original"))+": "+m(me.value)+")",1)]),_:1})):b("",!0)]),_:1},8,["label"]),n(u,{label:e.$t("Products.ParentProduct"),prop:"parent_id"},{default:r(()=>[n(o,{modelValue:l.value.parent_id,"onUpdate:modelValue":a[20]||(a[20]=t=>l.value.parent_id=t),clearable:"",placeholder:e.$t("Products.SelectParentProduct")},{default:r(()=>[n(i,{label:e.$t("Products.None"),value:null},null,8,["label"]),(s(!0),_(A,null,N(H.value,t=>(s(),$(i,{key:t.id,label:t.name_en,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),Me.value!==ve.value?(s(),$(M,{key:0,size:"small",effect:"plain",class:"current-value"},{default:r(()=>[V("("+m(e.$t("Products.Original"))+": "+m(ve.value)+")",1)]),_:1})):b("",!0)]),_:1},8,["label"]),l.value.images&&l.value.images.length?(s(),_("div",ya,[(s(!0),_(A,null,N(l.value.images,(t,g)=>(s(),_("img",{key:g,src:t.url?t.url:L(t.path),alt:"Product Image",style:{"max-width":"120px","max-height":"120px","margin-right":"10px","border-radius":"8px"}},null,8,$a))),128))])):b("",!0),n(u,{label:e.$t("Products.Images"),prop:"images"},{default:r(()=>[n(ne,{class:"upload-demo",drag:"",action:"","auto-upload":!1,limit:5,"file-list":l.value.images,"list-type":"picture","on-change":Ye,"on-remove":ze},{default:r(()=>[a[23]||(a[23]=S("i",{class:"el-icon-upload"},null,-1)),S("div",ha,m(e.$t("Products.DropFiles")),1)]),_:1},8,["file-list"])]),_:1},8,["label"]),n(u,null,{default:r(()=>[n(P,{type:"primary",onClick:Le},{default:r(()=>[V(m(e.$t("Products.UpdateButton")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[q,O.value]])])}}},Da=Je(Va,[["__scopeId","data-v-b854d451"]]);export{Da as default};
