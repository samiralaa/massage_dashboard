import{_ as E,D as V,M as C,y as b,E as R,r as i,o as A,c as N,e as t,p as s,U as u,b as m,a as S,t as _,j as h,G as B}from"./index-50b21e1d.js";const I={class:"currency-edit-container"},U="https://massagebackend.webenia.org",w={__name:"Edit",setup(z){const p=V(),f=C().params.id,o=localStorage.getItem("lang")||"en",g=b(null),n=b({name_en:"",name_ar:"",exchange_rate:""}),v={name_en:[{required:!0,message:o==="en"?"Please enter name (EN)":"من فضلك ادخل سعر العملة بالانجليزي",trigger:"blur"}],name_ar:[{required:!0,message:o==="en"?"Please input currency name (AR)":"من فضلك ادخل سعر العملة بالعربي",trigger:"blur"}],exchange_rate:[{required:!0,message:o==="en"?"Please input exchange rate":"من فضلك ادخل سعر الصرف",trigger:"blur"},{pattern:/^\d+(\.\d{1,2})?$/,message:o==="en"?"Exchange rate must be a valid number":"سعر الصرف يجب ان يكون رقم صحيح",trigger:"blur"}]},y=`${U}/api/currencies`;R(async()=>{try{const a=JSON.parse(localStorage.getItem("tokenData"));if(!(a!=null&&a.token)){u.error("Authorization token is missing");return}m.defaults.headers.common.Authorization=`Bearer ${a.token}`;const{data:e}=await m.get(`${y}/${f}`);e&&e.data?n.value={name_en:e.data.name_en,name_ar:e.data.name_ar,exchange_rate:e.data.exchange_rate}:u.error(o==="en"?"Currency not found":"العملة غير موجودة")}catch{u.error(o==="en"?"Failed to fetch currency data":"فشل في جلب بيانات العملة")}});const $=()=>{g.value.validate(async a=>{var e;if(a)try{const r=JSON.parse(localStorage.getItem("tokenData"));if(!(r!=null&&r.token)){u.error("Authorization token is missing");return}m.defaults.headers.common.Authorization=`Bearer ${r.token}`,await m.post(`${y}/${f}`,n.value),u.success(o==="en"?"Currency updated successfully":"تم تحديث العملة بنجاح"),p.push("/currencies")}catch(r){if(((e=r.response)==null?void 0:e.status)===422){const l=r.response.data.errors;for(const d in l)u.error(l[d][0])}else u.error(o==="en"?"Failed to update currency":"فشل في تحديث العملة")}})};return(a,e)=>{const r=i("el-input"),l=i("el-form-item"),d=i("el-button"),k=i("el-form"),x=i("el-card");return A(),N("div",I,[t(x,{class:"currency-card"},{default:s(()=>[S("h2",null,_(a.$t("input.currencies.Edit-Currency")),1),t(k,{model:n.value,ref_key:"formRef",ref:g,rules:v,"label-width":"120px"},{default:s(()=>[t(l,{label:a.$t("input.currencies.name-en"),prop:"name_en"},{default:s(()=>[t(r,{modelValue:n.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=c=>n.value.name_en=c)},null,8,["modelValue"])]),_:1},8,["label"]),t(l,{label:a.$t("input.currencies.name-ar"),prop:"name_ar"},{default:s(()=>[t(r,{modelValue:n.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=c=>n.value.name_ar=c)},null,8,["modelValue"])]),_:1},8,["label"]),t(l,{label:a.$t("input.currencies.exchangeRate"),prop:"exchange_rate"},{default:s(()=>[t(r,{modelValue:n.value.exchange_rate,"onUpdate:modelValue":e[2]||(e[2]=c=>n.value.exchange_rate=c)},null,8,["modelValue"])]),_:1},8,["label"]),t(l,null,{default:s(()=>[t(d,{type:"primary",onClick:$},{default:s(()=>[h(_(a.$t("input.currencies.update")),1)]),_:1}),t(d,{onClick:e[3]||(e[3]=c=>B(p).push("/currencies"))},{default:s(()=>[h(_(a.$t("input.currencies.cancel")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},M=E(w,[["__scopeId","data-v-d346b027"]]);export{M as default};
