import{_ as p,b as _,r as u,o as d,c as m,a as o,t as i,g as w,w as v,v as b,n as P,f as y,e as k,p as D,j as $}from"./index-50b21e1d.js";import{_ as E}from"./perfume-banner-d126793e.js";const S="https://massagebackend.webenia.org/api",j={name:"ForgotPassword",data(){return{formData:{email:""},errors:{email:""},loading:!1}},methods:{validateEmail(s){s?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?this.errors.email="":this.errors.email=this.$t("forgotPassword.validation.emailInvalid"):this.errors.email=this.$t("forgotPassword.validation.emailRequired")},async handleSubmit(){var s,r,c,h,e,l,n,a;if(this.validateEmail(this.formData.email),!this.errors.email)try{this.loading=!0;const t=await _.post(`${S}/forgot-password`,{email:this.formData.email});if(t.data.status==="success")(r=(s=this.$toast)==null?void 0:s.success)==null||r.call(s,t.data.message||this.$t("forgotPassword.successMessage")),localStorage.setItem("otp_email",this.formData.email),this.$router.push("/verify-otp");else throw new Error(t.data.message||this.$t("forgotPassword.errorMessage"))}catch(t){if(console.error("Forgot password error:",t),(h=(c=t.response)==null?void 0:c.data)!=null&&h.errors){const f=t.response.data.errors;Object.keys(f).forEach(g=>{this.errors.hasOwnProperty(g)&&(this.errors[g]=f[g][0])})}else(a=(e=this.$toast)==null?void 0:e.error)==null||a.call(e,((n=(l=t.response)==null?void 0:l.data)==null?void 0:n.message)||this.$t("forgotPassword.errorMessage"))}finally{this.loading=!1}}},watch:{"formData.email"(s){this.validateEmail(s)}}},M={class:"join-us-container"},V={class:"join-us-content"},x={class:"form-header"},C={class:"elegant-title"},F={class:"elegant-description"},I={class:"form-group"},N={for:"email"},R=["placeholder"],B={key:0,class:"error-message"},q=["disabled"],O={key:0},T={key:1,class:"loading-spinner"},U={class:"register-section"};function z(s,r,c,h,e,l){const n=u("router-link");return d(),m("div",M,[r[2]||(r[2]=o("div",{class:"banner-section"},[o("img",{src:E,alt:"Elegance Perfume",class:"banner-image"})],-1)),o("div",V,[o("div",x,[o("h1",C,i(s.$t("forgotPassword.title")),1),o("p",F,i(s.$t("forgotPassword.description")),1)]),o("form",{onSubmit:r[1]||(r[1]=w((...a)=>l.handleSubmit&&l.handleSubmit(...a),["prevent"])),class:"join-form"},[o("div",I,[o("label",N,i(s.$t("forgotPassword.email")),1),v(o("input",{type:"email",id:"email","onUpdate:modelValue":r[0]||(r[0]=a=>e.formData.email=a),placeholder:s.$t("forgotPassword.emailPlaceholder"),class:P({error:e.errors.email,valid:e.formData.email&&!e.errors.email}),required:""},null,10,R),[[b,e.formData.email]]),e.errors.email?(d(),m("span",B,i(e.errors.email),1)):y("",!0)]),o("button",{type:"submit",class:"submit-btn",disabled:e.loading},[e.loading?(d(),m("span",T)):(d(),m("span",O,i(s.$t("forgotPassword.submit")),1))],8,q),o("div",U,[o("p",null,[k(n,{to:"account/login",class:"link"},{default:D(()=>[$(i(s.$t("forgotPassword.loginHere")),1)]),_:1})])])],32)])])}const L=p(j,[["render",z],["__scopeId","data-v-86525813"]]);export{L as default};
