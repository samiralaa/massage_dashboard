import{_ as E,d as F,r as l,o as w,c as $,a as t,t as d,b as o,w as a,l as C,m as S,i as P,p as M,q,u as B,s as I,e as _,j as h,E as L}from"./index-8c31c214.js";const N=F({name:"LoginView",components:{Message:M,Lock:q},setup(){const e=B(),r=I(),u=_(null),s=_({email:"",password:"",remember:!1}),c=_(!1),n=_(null),b={email:[{required:!0,message:"Email is required",trigger:"blur"},{type:"email",message:"Please enter a valid email",trigger:"blur"}],password:[{required:!0,message:"Password is required",trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}]},g=async()=>{var i,f;if(u.value)try{c.value=!0,n.value=null,await u.value.validate(),await e.dispatch("login",{email:s.value.email,password:s.value.password}),L({message:"Login successful!",type:"success",duration:2e3}),s.value.remember?localStorage.setItem("rememberedEmail",s.value.email):localStorage.removeItem("rememberedEmail"),r.push("/dashboard")}catch(v){n.value=((f=(i=v.response)==null?void 0:i.data)==null?void 0:f.message)||"Login failed. Please check your credentials.",L({message:n.value,type:"error",duration:5e3})}finally{c.value=!1}},p=()=>{n.value=null};return localStorage.getItem("rememberedEmail")&&(s.value.email=localStorage.getItem("rememberedEmail"),s.value.remember=!0),{loginForm:s,loginFormRef:u,rules:b,loading:c,error:n,handleLogin:g,clearError:p}}}),R={class:"login-container"},U={class:"login-box"},j={class:"login-header"},D={class:"form-footer"},T={href:"#",class:"forgot-password"};function W(e,r,u,s,c,n){const b=l("Message"),g=l("el-icon"),p=l("el-input"),i=l("el-form-item"),f=l("Lock"),v=l("el-checkbox"),y=l("el-button"),k=l("el-form"),V=l("el-alert");return w(),$("div",R,[t("div",U,[t("div",j,[t("h2",null,d(e.$t("Login.WelcomeBack")),1),t("p",null,d(e.$t("Login.Pleaselogintoyouraccount")),1)]),o(k,{ref:"loginFormRef",model:e.loginForm,rules:e.rules,onSubmit:C(e.handleLogin,["prevent"])},{default:a(()=>[o(i,{prop:"email"},{default:a(()=>[o(p,{modelValue:e.loginForm.email,"onUpdate:modelValue":r[0]||(r[0]=m=>e.loginForm.email=m),type:"email",placeholder:"Email"},{prefix:a(()=>[o(g,null,{default:a(()=>[o(b)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(i,{prop:"password"},{default:a(()=>[o(p,{modelValue:e.loginForm.password,"onUpdate:modelValue":r[1]||(r[1]=m=>e.loginForm.password=m),type:"password",placeholder:"Password","show-password":""},{prefix:a(()=>[o(g,null,{default:a(()=>[o(f)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t("div",D,[o(v,{modelValue:e.loginForm.remember,"onUpdate:modelValue":r[2]||(r[2]=m=>e.loginForm.remember=m)},{default:a(()=>[h(d(e.$t("Login.RememberMe")),1)]),_:1},8,["modelValue"]),t("a",T,d(e.$t("Login.ForgotPassword")),1)]),o(y,{type:"primary",loading:e.loading,class:"login-button",onClick:e.handleLogin},{default:a(()=>[h(d(e.loading?"Logging in...":e.$t("Login.Login")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules","onSubmit"]),e.error?(w(),S(V,{key:0,title:e.error,type:"error","show-icon":"",class:"login-error",onClose:e.clearError},null,8,["title","onClose"])):P("",!0)])])}const A=E(N,[["render",W],["__scopeId","data-v-fd6bacc7"]]);export{A as default};
