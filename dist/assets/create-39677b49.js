import{_ as x,D as k,y as p,r as u,o as w,c as $,e as r,p as l,a as E,t as i,j as D,b as _,U as d}from"./index-50b21e1d.js";const R={class:"currency-create-container"},U="https://massagebackend.webenia.org",A={__name:"create",setup(B){const f=k(),c=localStorage.getItem("lang")||"en",m=p(null),a=p({name_en:"",name_ar:"",exchange_rate:"",code:""}),g={name_en:[{required:!0,message:c==="en"?"Please input currency name (EN)":"من فضلك ادخل سعر العملة بالانجليزي",trigger:"blur"}],name_ar:[{required:!0,message:c==="en"?"Please input currency name (AR)":"من فضلك ادخل سعر العملة بالعربي",trigger:"blur"}],exchange_rate:[{required:!0,message:c==="en"?"Please input exchange rate":"من فضلك ادخل سعر الصرف",trigger:"blur"},{pattern:/^\d+(\.\d{1,2})?$/,message:c==="en"?"Exchange rate must be a valid number":"سعر الصرف يجب ان يكون رقم صحيح",trigger:"blur"}]},v=`${U}/api/currencies`,b=()=>{m.value.validate(async o=>{if(o)try{const e=new FormData;e.append("name_en",a.value.name_en),e.append("name_ar",a.value.name_ar),e.append("exchange_rate",a.value.exchange_rate),e.append("code",a.value.code);const n=JSON.parse(localStorage.getItem("tokenData"));if(!n||!n.token)throw new Error("Authentication token not found");_.defaults.headers.common.Authorization=`Bearer ${n.token}`;const t=await _.post(v,e,{headers:{"Content-Type":"multipart/form-data"}});if(t.data.status)d.success("Currency created successfully"),f.push("/currencies");else throw new Error(t.data.message||"Failed to create currency")}catch(e){if(e.response&&e.response.status===422){const n=e.response.data.errors;for(const t in n)d.error(n[t][0])}else d.error(e.message||"Failed to create currency")}else return!1})};return(o,e)=>{const n=u("el-input"),t=u("el-form-item"),y=u("el-button"),h=u("el-form"),V=u("el-card");return w(),$("div",R,[r(V,{class:"currency-card"},{default:l(()=>[E("h2",null,i(o.$t("input.currencies.add-currency")),1),r(h,{model:a.value,ref_key:"formRef",ref:m,rules:g,"label-width":"120px"},{default:l(()=>[r(t,{label:o.$t("input.currencies.name-en"),prop:"name_en"},{default:l(()=>[r(n,{modelValue:a.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.name_en=s)},null,8,["modelValue"])]),_:1},8,["label"]),r(t,{label:o.$t("input.currencies.name-ar"),prop:"name_ar"},{default:l(()=>[r(n,{modelValue:a.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.name_ar=s)},null,8,["modelValue"])]),_:1},8,["label"]),r(t,{label:o.$t("input.currencies.exchangeRate"),prop:"exchange_rate"},{default:l(()=>[r(n,{modelValue:a.value.exchange_rate,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.exchange_rate=s)},null,8,["modelValue"])]),_:1},8,["label"]),r(t,{label:o.$t("input.currencies.code"),prop:"code"},{default:l(()=>[r(n,{modelValue:a.value.code,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.code=s)},null,8,["modelValue"])]),_:1},8,["label"]),r(t,null,{default:l(()=>[r(y,{type:"primary",onClick:b},{default:l(()=>[D(i(o.$t("input.currencies.create")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},N=x(A,[["__scopeId","data-v-8a4a624d"]]);export{N as default};
