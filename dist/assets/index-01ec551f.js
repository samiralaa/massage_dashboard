import{_ as E,s as x,e as h,f as A,r as o,G as F,o as f,c as N,a as w,t as s,b as a,w as n,h as u,E as p,j as l,H as z,m as I,D as R}from"./index-8e378a69.js";const S={class:"currencies-container"},M={class:"header"},T="https://backend.msgperfumes.com",U={__name:"index",setup(V){const y=x(),_=h([]),i=h(!1),g=`${T}/api/website/currencies`,m=async()=>{i.value=!0;try{const e=JSON.parse(localStorage.getItem("tokenData"));if(!e||!e.token)throw new Error("Authentication token not found");u.defaults.headers.common.Authorization=`Bearer ${e.token}`;const t=await u.get(g);if(t.data.data&&Array.isArray(t.data.data))_.value=t.data.data;else throw new Error("Invalid response format")}catch(e){console.error("Fetch currencies error:",e),p.error(e.message||"Failed to fetch currencies")}finally{i.value=!1}};A(()=>{m()});const b=e=>{y.push({name:"currencies.edit",params:{id:e.id}})},v=async e=>{try{await R.confirm("Are you sure you want to delete this currency?","Warning",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"});const t=await u.delete(`https://backend.msgperfumes.com/api/currencies/${e.id}`);if(t.data.status)p.success("Currency deleted successfully"),await m();else throw new Error(t.data.message||"Failed to delete currency")}catch(t){t!=="cancel"&&(console.error("Delete currency error:",t),p.error(t.message||"Failed to delete currency"))}};return(e,t)=>{const d=o("el-button"),c=o("el-table-column"),$=o("el-tag"),k=o("el-table"),B=o("el-card"),C=F("loading");return f(),N("div",S,[w("div",M,[w("h2",null,s(e.$t("input.currencies.title")),1),a(d,{type:"primary",to:"/currencies/create",tag:"router-link"},{default:n(()=>[l(s(e.$t("input.currencies.create")),1)]),_:1})]),a(B,{class:"currencies-table"},{default:n(()=>[z((f(),I(k,{data:_.value,style:{width:"100%"}},{default:n(()=>[a(c,{prop:"name_ar",label:e.$t("input.currencies.name-ar"),"min-width":"150"},null,8,["label"]),a(c,{prop:"name_en",label:e.$t("input.currencies.name-en"),"min-width":"150"},null,8,["label"]),a(c,{prop:"exchange_rate",label:e.$t("input.currencies.exchangeRate"),"min-width":"120"},{default:n(r=>[l(s(parseFloat(r.row.exchange_rate).toFixed(2)),1)]),_:1},8,["label"]),a(c,{label:e.$t("input.currencies.status.status"),"min-width":"100"},{default:n(r=>[a($,{type:r.row.is_deleted?"danger":"success",size:"small"},{default:n(()=>[l(s(r.row.is_deleted?e.$t("currencies.deleted"):e.$t("input.currencies.status.active")),1)]),_:2},1032,["type"])]),_:1},8,["label"]),a(c,{label:e.$t("input.currencies.action"),"min-width":"150",fixed:"right"},{default:n(r=>[a(d,{type:"primary",size:"small",onClick:D=>b(r.row),disabled:r.row.is_deleted},{default:n(()=>[l(s(e.$t("input.currencies.update")),1)]),_:1},8,["onClick","disabled"]),a(d,{type:"danger",size:"small",onClick:D=>v(r.row),disabled:r.row.is_deleted},{default:n(()=>[l(s(e.$t("input.currencies.delete")),1)]),_:1},8,["onClick","disabled"])]),_:1},8,["label"])]),_:1},8,["data"])),[[C,i.value]])]),_:1})])}}},j=E(U,[["__scopeId","data-v-c8d77185"]]);export{j as default};
