import{_ as E,D as x,y as h,E as A,r as c,a5 as F,o as w,c as N,a as f,t as s,e as a,p as n,b as u,U as _,j as l,w as z,l as I,a4 as R}from"./index-50b21e1d.js";const S={class:"currencies-container"},U={class:"header"},M="https://massagebackend.webenia.org",T={__name:"index",setup(V){const g=x(),p=h([]),i=h(!1),y=`${M}/api/website/currencies`,m=async()=>{i.value=!0;try{const e=JSON.parse(localStorage.getItem("tokenData"));if(!e||!e.token)throw new Error("Authentication token not found");u.defaults.headers.common.Authorization=`Bearer ${e.token}`;const t=await u.get(y);if(t.data.data&&Array.isArray(t.data.data))p.value=t.data.data;else throw new Error("Invalid response format")}catch(e){console.error("Fetch currencies error:",e),_.error(e.message||"Failed to fetch currencies")}finally{i.value=!1}};A(()=>{m()});const b=e=>{g.push({name:"currencies.edit",params:{id:e.id}})},v=async e=>{try{await R.confirm("Are you sure you want to delete this currency?","Warning",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"});const t=await u.delete(`https://massagebackend.webenia.org/api/currencies/${e.id}`);if(t.data.status)_.success("Currency deleted successfully"),await m();else throw new Error(t.data.message||"Failed to delete currency")}catch(t){t!=="cancel"&&(console.error("Delete currency error:",t),_.error(t.message||"Failed to delete currency"))}};return(e,t)=>{const d=c("el-button"),o=c("el-table-column"),$=c("el-tag"),k=c("el-table"),B=c("el-card"),C=F("loading");return w(),N("div",S,[f("div",U,[f("h2",null,s(e.$t("input.currencies.title")),1),a(d,{type:"primary",to:"/currencies/create",tag:"router-link"},{default:n(()=>[l(s(e.$t("input.currencies.create")),1)]),_:1})]),a(B,{class:"currencies-table"},{default:n(()=>[z((w(),I(k,{data:p.value,style:{width:"100%"}},{default:n(()=>[a(o,{prop:"name_ar",label:e.$t("input.currencies.name-ar"),"min-width":"150"},null,8,["label"]),a(o,{prop:"name_en",label:e.$t("input.currencies.name-en"),"min-width":"150"},null,8,["label"]),a(o,{prop:"exchange_rate",label:e.$t("input.currencies.exchangeRate"),"min-width":"120"},{default:n(r=>[l(s(parseFloat(r.row.exchange_rate).toFixed(2)),1)]),_:1},8,["label"]),a(o,{label:e.$t("input.currencies.status.status"),"min-width":"100"},{default:n(r=>[a($,{type:r.row.is_deleted?"danger":"success",size:"small"},{default:n(()=>[l(s(r.row.is_deleted?e.$t("currencies.deleted"):e.$t("input.currencies.status.active")),1)]),_:2},1032,["type"])]),_:1},8,["label"]),a(o,{label:e.$t("input.currencies.action"),"min-width":"150",fixed:"right"},{default:n(r=>[a(d,{type:"primary",size:"small",onClick:D=>b(r.row),disabled:r.row.is_deleted},{default:n(()=>[l(s(e.$t("input.currencies.update")),1)]),_:2},1032,["onClick","disabled"]),a(d,{type:"danger",size:"small",onClick:D=>v(r.row),disabled:r.row.is_deleted},{default:n(()=>[l(s(e.$t("input.currencies.delete")),1)]),_:2},1032,["onClick","disabled"])]),_:1},8,["label"])]),_:1},8,["data"])),[[C,i.value]])]),_:1})])}}},j=E(T,[["__scopeId","data-v-85744ad1"]]);export{j as default};
