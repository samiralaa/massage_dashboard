import{_ as B,M as D,y as m,E as F,r as n,o as s,c as i,l as d,p as _,e as v,a as t,t as a,b as f,U as I,F as L,d as S,G as M,a6 as R,j as p}from"./index-50b21e1d.js";const U={class:"product-detail-container"},V={class:"product-title"},C={class:"images"},j=["src"],z={key:1,class:"image-error"},G={class:"info"},J={dir:"rtl"},O={key:1,class:"loading-container"},y="https://massagebackend.webenia.org",T={__name:"show",setup(q){const k=D(),o=m({}),r=m(!1),c=m(null),$=`${y}/api/products`,P=async()=>{r.value=!0;try{const e=JSON.parse(localStorage.getItem("tokenData"));if(!e||!e.token)throw new Error("Authentication token not found");f.defaults.headers.common.Authorization=`Bearer ${e.token}`;const{id:u}=k.params,l=await f.get(`${$}/${u}`);if(l.data.status)o.value=l.data.data;else throw new Error(l.data.message||"Failed to fetch product")}catch(e){console.error("Fetch product error:",e),c.value=e.message||"Failed to fetch product",I.error(c.value)}finally{r.value=!1}};return F(()=>{P()}),(e,u)=>{const l=n("el-carousel-item"),w=n("el-carousel"),A=n("el-icon"),b=n("el-card"),N=n("el-spinner"),E=n("el-alert");return s(),i("div",U,[!r.value&&!c.value?(s(),d(b,{key:0,class:"product-card"},{default:_(()=>{var g;return[t("h2",V,a(o.value.name_en),1),t("div",C,[o.value.images&&o.value.images.length>0?(s(),d(w,{key:0,height:"300px",arrow:"always"},{default:_(()=>[(s(!0),i(L,null,S(o.value.images,h=>(s(),d(l,{key:h.id},{default:_(()=>[t("img",{src:`${y}/public/storage/${h.path}`,class:"product-image",alt:"Product Image"},null,8,j)]),_:2},1024))),128))]),_:1})):(s(),i("div",z,[v(A,null,{default:_(()=>[v(M(R))]),_:1}),t("p",null,a(e.$t("Products.NoImageAvailable")),1)]))]),t("div",G,[t("p",null,[t("strong",null,a(e.$t("Products.Price"))+":",1),p(" "+a(o.value.price)+" "+a(((g=o.value.currency)==null?void 0:g.name_en)||""),1)]),t("p",null,[t("strong",null,a(e.$t("Products.Availability"))+":",1),p(" "+a(o.value.is_available?e.$t("Products.Available"):e.$t("Products.NotAvailable")),1)]),t("p",null,[t("strong",null,a(e.$t("Products.DescriptionEn"))+":",1),p(" "+a(o.value.description_en||e.$t("Products.NA")),1)]),t("p",null,[t("strong",null,a(e.$t("Products.DescriptionAr"))+":",1),u[0]||(u[0]=p()),t("span",J,a(o.value.description_ar||e.$t("Products.NA")),1)])])]}),_:1})):r.value?(s(),i("div",O,[v(N,{type:"snake"}),t("p",null,a(e.$t("Products.Loading")),1)])):(s(),d(E,{key:2,title:c.value,type:"error","show-icon":""},null,8,["title"]))])}}},K=B(T,[["__scopeId","data-v-5e595307"]]);export{K as default};
